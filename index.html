<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Gesti√≥n de Alumnos - CRUD TypeScript</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <h1>üéì Sistema de Gesti√≥n de Alumnos</h1>
    
    <div class="actions">
      <h2>Operaciones CRUD:</h2>
      
      <button id="btnConsultar" class="btn btn-primary">
        ÔøΩ Consultar Alumnos
      </button>
      
      <button id="btnCrear" class="btn btn-success">
        ‚ûï Registrar Alumno
      </button>
      
      <!-- Secci√≥n para editar -->
      <div class="edit-form">
        <h3>‚úèÔ∏è Editar Alumno:</h3>
        <input type="number" id="editId" placeholder="ID del alumno (ej: 2)" value="2" min="1" max="100">
        <input type="text" id="editTitle" placeholder="Nuevo nombre" value="Juan P√©rez Actualizado">
        <textarea id="editBody" placeholder="Informaci√≥n del alumno">Estudiante de Desarrollo Web II - Informaci√≥n actualizada</textarea>
        <button id="btnEditar" class="btn btn-warning">Editar Alumno</button>
      </div>
      
      <!-- Secci√≥n para eliminar -->
      <div class="delete-form">
        <h3>üóëÔ∏è Dar de Baja Alumno:</h3>
        <input type="number" id="deleteId" placeholder="ID del alumno (ej: 1)" value="1" min="1" max="100">
        <button id="btnEliminar" class="btn btn-danger">Dar de Baja</button>
      </div>
    </div>

    <div class="output">
      <h3>ÔøΩ Resultados del Sistema:</h3>
      <div id="resultados" class="results-box">
        <p><em>Selecciona una operaci√≥n para gestionar los alumnos...</em></p>
      </div>
    </div>
  </div>

  <script src="js/main.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const servicio = new DataService('https://jsonplaceholder.typicode.com/posts');
      const resultados = document.getElementById('resultados');

      function mostrarResultado(mensaje) {
        resultados.innerHTML = `<p>${mensaje}</p>`;
        console.log(mensaje);
      }

      // Bot√≥n Consultar Alumnos
      document.getElementById('btnConsultar').addEventListener('click', async () => {
        mostrarResultado('üîÑ Consultando lista de alumnos...');
        const alumnos = await servicio.consultarDatos();
        const primeros3 = alumnos.slice(0, 3);
        let html = '<h4>üìã Primeros 3 alumnos registrados:</h4><ul>';
        primeros3.forEach(alumno => {
          html += `<li><strong>ID ${alumno.id}:</strong> ${alumno.title} <br><small>Info: ${alumno.body.substring(0, 50)}...</small></li>`;
        });
        html += '</ul>';
        resultados.innerHTML = html;
      });

      // Bot√≥n Registrar Alumno
      document.getElementById('btnCrear').addEventListener('click', async () => {
        mostrarResultado('‚ûï Registrando nuevo alumno...');
        const nuevoAlumno = {
          title: 'Mar√≠a Gonz√°lez - Estudiante Nuevo',
          body: 'Alumna de Desarrollo Web II - Reci√©n inscrita en el curso.',
          userId: 10
        };
        const alumnoCreado = await servicio.crearPost(nuevoAlumno);
        if (alumnoCreado) {
          resultados.innerHTML = `
            <h4>‚úÖ Alumno registrado exitosamente:</h4>
            <p><strong>ID:</strong> ${alumnoCreado.id}</p>
            <p><strong>Nombre:</strong> ${alumnoCreado.title}</p>
            <p><strong>Informaci√≥n:</strong> ${alumnoCreado.body}</p>
          `;
        }
      });

      // Bot√≥n Editar Alumno
      document.getElementById('btnEditar').addEventListener('click', async () => {
        const editId = document.getElementById('editId').value;
        const editTitle = document.getElementById('editTitle').value;
        const editBody = document.getElementById('editBody').value;
        
        if (!editId || !editTitle || !editBody) {
          mostrarResultado('‚ùå Por favor completa todos los campos del alumno');
          return;
        }
        
        mostrarResultado(`‚úèÔ∏è Actualizando informaci√≥n del alumno ID ${editId}...`);
        const datosActualizados = {
          title: editTitle,
          body: editBody
        };
        const alumnoEditado = await servicio.editarPost(parseInt(editId), datosActualizados);
        if (alumnoEditado) {
          resultados.innerHTML = `
            <h4>‚úÖ Informaci√≥n del alumno actualizada:</h4>
            <p><strong>ID:</strong> ${alumnoEditado.id}</p>
            <p><strong>Nombre Actualizado:</strong> ${alumnoEditado.title}</p>
            <p><strong>Nueva Informaci√≥n:</strong> ${alumnoEditado.body}</p>
          `;
        } else {
          resultados.innerHTML = '<h4>‚ùå Error al actualizar la informaci√≥n del alumno</h4>';
        }
      });

      // Bot√≥n Dar de Baja
      document.getElementById('btnEliminar').addEventListener('click', async () => {
        const deleteId = document.getElementById('deleteId').value;
        
        if (!deleteId) {
          mostrarResultado('‚ùå Por favor ingresa el ID del alumno a dar de baja');
          return;
        }
        
        mostrarResultado(`üóëÔ∏è Dando de baja al alumno ID ${deleteId}...`);
        await servicio.eliminarPost(parseInt(deleteId));
        resultados.innerHTML = `<h4>‚úÖ Alumno con ID ${deleteId} dado de baja exitosamente</h4>`;
      });
    });
  </script>
</body>
</html>